/* global datas, _ */

var GameManager = function () {

    this.sprites = [];
    this.groups = [];

    var manager = this;

    var Sprite = function (spriteDef) {

        this.spriteObj = $("#sprite-" + spriteDef.id);

        this.enable = function () {
            this.spriteObj.addClass("enabled");
        };

        this.disable = function () {
            this.spriteObj.removeClass("enabled");
        };
    };

    var SpritesGroup = function (groupDef) {

        var sprites = [];

        _.each(groupDef.sprites, function (spriteid) {
            sprites.push(manager.sprites[spriteid]);
        });

        this.showAll = function () {
            _.each(sprites, function (sprite) {
                sprite.enable();
            });
        };

        this.hideAll = function () {
            _.each(sprites, function (sprite) {
                sprite.disable();
            });
        };
    };

    var GroupState = function (stateDef) {

    };
    
    var Sequence = function (seqDef) {
        
    };

    var obj = this;

    // indexation des donn√©es

    // sprites
    _.each(datas.layout.sprites, function (sp) {
        obj.sprites[sp.id] = new Sprite(sp);
    });

    // groups
    _.each(datas.layout.groups, function (group) {
        obj.groups[group.id] = new SpritesGroup(group);
    });
};


