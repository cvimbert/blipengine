var GameConsole = function () {
    $("#console-prompt").on("keydown", onPromptKeyDown);
    $("body").on("keydown", callConsole);


    function onPromptKeyDown(e) {
        
        if (e.keyCode === 13) {
            // lancement d'une commande
            var cmdStr = $("#console-prompt").text();
            
            cmdStr.replace("\r", "");
            cmdStr.replace("\n", "");
            
            var cmdArr = cmdStr.split(" ");

            var cmdName = cmdArr[0];

            $("#console-prompt").text("");
            
            cmdArr.splice(0, 1);

            launchCommand(cmdStr, cmdName, cmdArr);
        }
    }
    ;
    
    
    function callConsole(e) {
        if (e.ctrlKey && e.altKey && e.keyCode === 75) {
            $("#console-prompt").focus();
        }
    }


    function launchCommand(rawCmd, name, args) {
        $("#console-history").append(">" + rawCmd + "<br/>");
        
        switch (name) {
            case "showgroup":
                window.gameManager.groups[args[0]].showAll();
                break;
                
            case "hidegroup":
                window.gameManager.groups[args[0]].hideAll();
                break;
                
            default:
                $("#console-history").append("Commande inconnue<br/>");
        }
    }
    ;
};